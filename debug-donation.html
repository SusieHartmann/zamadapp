<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0.001 ETH 捐款功能测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .title {
            text-align: center;
            color: #00ffff;
            text-shadow: 0 0 20px #00ffff;
            margin-bottom: 30px;
        }
        .test-section {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border-left: 4px solid #00ffff;
        }
        .button {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: all 0.3s ease;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }
        .info {
            background: rgba(0, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .success {
            background: rgba(0, 255, 0, 0.1);
            border-left: 4px solid #00ff00;
        }
        .error {
            background: rgba(255, 0, 0, 0.1);
            border-left: 4px solid #ff0000;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">💜 NEON PULSE CIPHER</h1>
        <h2 class="title">0.001 ETH 捐款功能测试</h2>
        
        <div class="test-section">
            <h3>🎯 测试步骤</h3>
            <ol>
                <li><strong>访问主应用</strong>: <a href="http://localhost:1001" target="_blank" style="color: #00ffff;">http://localhost:1001</a></li>
                <li><strong>连接钱包</strong>: 点击连接 MetaMask</li>
                <li><strong>测试0.001 ETH</strong>: 点击 "0.001 ETH" 快速按钮</li>
                <li><strong>确认捐款</strong>: 点击 "💖 Donate Now" 按钮</li>
                <li><strong>查看控制台</strong>: 按 F12 查看调试信息</li>
            </ol>
        </div>

        <div class="test-section">
            <h3>🔧 调试信息检查</h3>
            <div class="info">
                打开浏览器开发者工具（F12），在Console标签中查看以下信息：
                <ul>
                    <li><code>Setting donation amount to: 0.001</code></li>
                    <li><code>Donation amount: 0.001 Parsed: 0.001 Comparison: true</code></li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h3>✅ 预期行为</h3>
            <div class="info success">
                <strong>正确行为：</strong>
                <ul>
                    <li>点击 "0.001 ETH" 按钮后，输入框显示 "0.001"</li>
                    <li>点击捐款按钮后，应该弹出 MetaMask 交易确认</li>
                    <li>不应该显示 "Minimum donation amount" 错误</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h3>❌ 问题排查</h3>
            <div class="info error">
                <strong>如果仍然无法捐款：</strong>
                <ul>
                    <li>检查控制台是否显示解析错误</li>
                    <li>确认输入框显示的是 "0.001" 而不是其他值</li>
                    <li>检查是否连接了正确的钱包网络</li>
                    <li>确认钱包余额大于 0.001 ETH</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h3>🚀 快速测试</h3>
            <button class="button" onclick="window.open('http://localhost:1001', '_blank')">
                打开 NEON PULSE CIPHER
            </button>
            <button class="button" onclick="testJS()">
                测试 JavaScript 解析
            </button>
        </div>

        <div id="test-result" class="test-section" style="display: none;">
            <h3>📊 JavaScript 测试结果</h3>
            <div id="js-test-output" class="info"></div>
        </div>
    </div>

    <script>
        function testJS() {
            const testAmount = "0.001";
            const parsedAmount = parseFloat(testAmount);
            const comparison = parsedAmount >= 0.001;
            
            const result = `
                <strong>JavaScript 解析测试：</strong><br>
                原始值: "${testAmount}"<br>
                parseFloat 结果: ${parsedAmount}<br>
                类型: ${typeof parsedAmount}<br>
                >= 0.001: ${comparison}<br>
                < 0.001: ${parsedAmount < 0.001}<br>
                isNaN: ${isNaN(parsedAmount)}<br>
                Boolean 转换: ${Boolean(testAmount)}<br>
                严格相等: ${parsedAmount === 0.001}<br>
                <br>
                <span style="color: ${comparison ? '#00ff00' : '#ff0000'}">
                    ${comparison ? '✅ 测试通过 - 应该可以捐款' : '❌ 测试失败 - 需要修复'}
                </span>
            `;
            
            document.getElementById('test-result').style.display = 'block';
            document.getElementById('js-test-output').innerHTML = result;
        }
    </script>
</body>
</html>